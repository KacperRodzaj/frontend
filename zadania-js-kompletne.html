<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zadania JavaScript - Kompletny Zestaw</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        header p {
            opacity: 0.9;
            font-size: 1.1em;
        }
        
        .content {
            padding: 30px;
        }
        
        .section {
            margin-bottom: 40px;
            border-bottom: 2px solid #eee;
            padding-bottom: 30px;
        }
        
        .section:last-child {
            border-bottom: none;
        }
        
        .section h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.8em;
        }
        
        .section h3 {
            color: #764ba2;
            margin-top: 15px;
            margin-bottom: 10px;
            font-size: 1.2em;
        }
        
        /* Zadanie 4 - Galeria */
        #gallery {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .gallery-img {
            width: 100%;
            height: 150px;
            background: #ddd;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.3s, opacity 0.3s;
            object-fit: cover;
        }
        
        .gallery-img:hover {
            transform: scale(1.05);
            opacity: 0.8;
        }
        
        .lightbox {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            justify-content: center;
            align-items: center;
            z-index: 1000;
            flex-wrap: wrap;
        }
        
        .lightbox.active {
            display: flex;
        }
        
        .lightbox-content {
            position: relative;
            max-width: 90%;
            max-height: 90%;
        }
        
        .lightbox img {
            max-width: 100%;
            max-height: 80vh;
            border-radius: 8px;
        }
        
        .lightbox .close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.9);
            border: none;
            font-size: 28px;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .lightbox .nav {
            position: absolute;
            background: rgba(255,255,255,0.9);
            border: none;
            padding: 10px 15px;
            cursor: pointer;
            border-radius: 5px;
            font-weight: bold;
        }
        
        .lightbox .prev {
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
        }
        
        .lightbox .next {
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
        }
        
        /* Zadanie 5 - Formularz */
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #333;
        }
        
        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-family: inherit;
            transition: border-color 0.3s;
        }
        
        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .form-group input.valid {
            border-color: green;
        }
        
        .form-group input.invalid {
            border-color: red;
        }
        
        .form-group .error {
            color: red;
            font-size: 0.9em;
            margin-top: 5px;
        }
        
        .form-group .success {
            color: green;
            font-size: 0.9em;
            margin-top: 5px;
        }
        
        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: transform 0.2s;
        }
        
        button:hover {
            transform: translateY(-2px);
        }
        
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        /* Zadanie 6 - API */
        #loader {
            display: none;
            text-align: center;
            margin: 20px 0;
        }
        
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        
        table th, table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        table th {
            background: #667eea;
            color: white;
        }
        
        table tr:hover {
            background: #f5f5f5;
        }
        
        /* Zadanie 7 - SPA Manager */
        .controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .filter-btn, .sort-btn {
            padding: 8px 15px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .filter-btn.active, .sort-btn.active {
            background: #667eea;
            color: white;
        }
        
        .filter-btn:hover, .sort-btn:hover {
            background: #764ba2;
            border-color: #764ba2;
            color: white;
        }
        
        #zadania-lista {
            list-style: none;
            margin-top: 20px;
        }
        
        .zadanie-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: #f9f9f9;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid #667eea;
            transition: all 0.3s;
        }
        
        .zadanie-item.wykonane {
            opacity: 0.6;
            text-decoration: line-through;
        }
        
        .zadanie-item.high {
            border-left-color: #ff6b6b;
        }
        
        .zadanie-item.medium {
            border-left-color: #ffd93d;
        }
        
        .zadanie-item.low {
            border-left-color: #6bcf7f;
        }
        
        .zadanie-item input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }
        
        .zadanie-info {
            flex: 1;
        }
        
        .zadanie-info .tytul {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .zadanie-info .kategoria {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 0.85em;
            margin-right: 10px;
        }
        
        .zadanie-info .priorytet {
            display: inline-block;
            font-size: 0.85em;
            font-weight: bold;
            padding: 3px 10px;
            border-radius: 3px;
        }
        
        .priorytet.high { background: #ff6b6b; color: white; }
        .priorytet.medium { background: #ffd93d; color: black; }
        .priorytet.low { background: #6bcf7f; color: white; }
        
        .zadanie-item button {
            padding: 5px 15px;
            font-size: 0.9em;
            background: #ff6b6b;
        }
        
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .stat-box {
            background: #f0f0f0;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            border-left: 4px solid #667eea;
        }
        
        .stat-box .number {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
        }
        
        .stat-box .label {
            color: #666;
            font-size: 0.9em;
            margin-top: 5px;
        }
        
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #667eea;
            color: white;
            padding: 15px 25px;
            border-radius: 5px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            animation: slideIn 0.3s ease-out;
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üìö Zadania JavaScript</h1>
            <p>Kompletny zestaw (7 zada≈Ñ, 200 pkt, 8-10h)</p>
        </header>
        
        <div class="content">
            <!-- ZADANIE 4: GALERIA -->
            <section class="section">
                <h2>Zadanie 4: Galeria z Lightbox</h2>
                <p>Kliknij na obraz, u≈ºyj strza≈Çek do nawigacji, ESC aby zamknƒÖƒá</p>
                
                <div id="gallery"></div>
                <div id="lightbox" class="lightbox">
                    <div class="lightbox-content">
                        <button class="close" onclick="zamknijLightbox()">&times;</button>
                        <button class="nav prev" onclick="poprzedniObraz()">‚Äπ</button>
                        <img id="lightbox-img" src="" alt="">
                        <button class="nav next" onclick="nastepnyObraz()">‚Ä∫</button>
                    </div>
                </div>
            </section>
            
            <!-- ZADANIE 5: FORMULARZ -->
            <section class="section">
                <h2>Zadanie 5: Formularz z WalidacjƒÖ</h2>
                <form id="formularz-kontakt">
                    <div class="form-group">
                        <label for="imie">Imiƒô (min 2 znaki, tylko litery):</label>
                        <input type="text" id="imie" name="imie" required>
                        <div class="error"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="email">Email:</label>
                        <input type="email" id="email" name="email" required>
                        <div class="error"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="telefon">Telefon (9 cyfr, opcjonalny):</label>
                        <input type="tel" id="telefon" name="telefon">
                        <div class="error"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="wiadomosc">Wiadomo≈õƒá (min 10 znak√≥w):</label>
                        <textarea id="wiadomosc" name="wiadomosc" rows="4" required></textarea>
                        <div class="error"></div>
                    </div>
                    
                    <div class="form-group">
                        <input type="checkbox" id="zgoda" name="zgoda" required>
                        <label for="zgoda" style="display: inline; margin-left: 5px;">Akceptujƒô warunki</label>
                        <div class="error"></div>
                    </div>
                    
                    <button type="submit">Wy≈õlij formularz</button>
                </form>
            </section>
            
            <!-- ZADANIE 6: API -->
            <section class="section">
                <h2>Zadanie 6: Pobieranie Danych z API</h2>
                <p>JSONPlaceholder - publiczne dane testowe (kliknij na u≈ºytkownika aby zobaczyƒá posty)</p>
                
                <button onclick="pobierzU≈ºytkownik√≥w()">Pobierz U≈ºytkownik√≥w</button>
                <button onclick="exportJson()">Eksportuj JSON</button>
                
                <div id="loader">
                    <div class="spinner"></div>
                    <p>≈Åadowanie...</p>
                </div>
                
                <div id="api-wyniki"></div>
            </section>
            
            <!-- ZADANIE 7: SPA -->
            <section class="section">
                <h2>Zadanie 7: Mened≈ºer Zada≈Ñ (SPA)</h2>
                
                <form id="formularz-zadanie">
                    <div class="form-group">
                        <input type="text" id="tytu≈Ç-zadania" placeholder="Wpisz nowe zadanie..." required>
                    </div>
                    <div class="form-group">
                        <select id="priorytet-zadania">
                            <option value="low">Niski priorytet</option>
                            <option value="medium" selected>≈öredni priorytet</option>
                            <option value="high">Wysoki priorytet</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <select id="kategoria-zadania">
                            <option value="praca">Praca</option>
                            <option value="dom">Dom</option>
                            <option value="zakupy">Zakupy</option>
                            <option value="inne" selected>Inne</option>
                        </select>
                    </div>
                    <button type="submit">Dodaj Zadanie</button>
                </form>
                
                <div style="margin-top: 20px;">
                    <h3>Filtry:</h3>
                    <div class="controls">
                        <button class="filter-btn active" data-filter="wszystkie" onclick="ustawFilter('wszystkie')">Wszystkie</button>
                        <button class="filter-btn" data-filter="aktywne" onclick="ustawFilter('aktywne')">Aktywne</button>
                        <button class="filter-btn" data-filter="wykonane" onclick="ustawFilter('wykonane')">Wykonane</button>
                    </div>
                    
                    <h3>Sortowanie:</h3>
                    <select id="sortowanie-zadania" onchange="ustawSortowanie(this.value)">
                        <option value="domy≈õlnie">Domy≈õlnie</option>
                        <option value="priorytet">Priorytet</option>
                        <option value="alfabetycznie">Alfabetycznie</option>
                    </select>
                </div>
                
                <ul id="zadania-lista"></ul>
                
                <div class="stats">
                    <div class="stat-box">
                        <div class="number" id="stat-total">0</div>
                        <div class="label">Wszystkie</div>
                    </div>
                    <div class="stat-box">
                        <div class="number" id="stat-wykonane">0</div>
                        <div class="label">Wykonane</div>
                    </div>
                    <div class="stat-box">
                        <div class="number" id="stat-procent">0%</div>
                        <div class="label">Procent</div>
                    </div>
                </div>
                
                <button onclick="exportZadania()" style="margin-top: 20px;">Eksportuj Zadania (JSON)</button>
                <button onclick="czyszczWszystko()" style="margin-top: 20px; background: #ff6b6b;">Wyczy≈õƒá Wszystko</button>
            </section>
        </div>
    </div>

    <script src="zadania-js-wszystkie.js"></script>
    <script>
        // ===================================================================
        // ZADANIE 4: GALERIA Z LIGHTBOX
        // ===================================================================
        
        // Generuj dane obraz√≥w
        const obrazy = [
            { id: 1, url: 'https://picsum.photos/300/300?random=1', opis: 'Obraz 1' },
            { id: 2, url: 'https://picsum.photos/300/300?random=2', opis: 'Obraz 2' },
            { id: 3, url: 'https://picsum.photos/300/300?random=3', opis: 'Obraz 3' },
            { id: 4, url: 'https://picsum.photos/300/300?random=4', opis: 'Obraz 4' },
            { id: 5, url: 'https://picsum.photos/300/300?random=5', opis: 'Obraz 5' },
            { id: 6, url: 'https://picsum.photos/300/300?random=6', opis: 'Obraz 6' },
        ];
        
        let aktualnyObraz = 0;
        
        function initGaleria() {
            const galeria = document.getElementById('gallery');
            obrazy.forEach((obraz, idx) => {
                const img = document.createElement('img');
                img.src = obraz.url;
                img.alt = obraz.opis;
                img.className = 'gallery-img';
                img.onclick = () => otworzLightbox(idx);
                galeria.appendChild(img);
            });
        }
        
        function otworzLightbox(idx) {
            aktualnyObraz = idx;
            const lightbox = document.getElementById('lightbox');
            document.getElementById('lightbox-img').src = obrazy[idx].url;
            lightbox.classList.add('active');
        }
        
        function zamknijLightbox() {
            document.getElementById('lightbox').classList.remove('active');
        }
        
        function nastepnyObraz() {
            aktualnyObraz = (aktualnyObraz + 1) % obrazy.length;
            document.getElementById('lightbox-img').src = obrazy[aktualnyObraz].url;
        }
        
        function poprzedniObraz() {
            aktualnyObraz = (aktualnyObraz - 1 + obrazy.length) % obrazy.length;
            document.getElementById('lightbox-img').src = obrazy[aktualnyObraz].url;
        }
        
        document.addEventListener('keydown', (e) => {
            if (document.getElementById('lightbox').classList.contains('active')) {
                if (e.key === 'ArrowRight') nastepnyObraz();
                if (e.key === 'ArrowLeft') poprzedniObraz();
                if (e.key === 'Escape') zamknijLightbox();
            }
        });
        
        // ===================================================================
        // ZADANIE 5: FORMULARZE I WALIDACJA
        // ===================================================================
        
        const regexEmail = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        const regexTelefon = /^\d{9}$/;
        const regexImie = /^[a-zA-ZƒÖƒôƒá≈Ñ√≥≈õ≈∫≈ºƒÑƒòƒÜ≈É√ì≈ö≈π≈ª\s]+$/;
        
        const pola = {
            imie: document.getElementById('imie'),
            email: document.getElementById('email'),
            telefon: document.getElementById('telefon'),
            wiadomosc: document.getElementById('wiadomosc'),
            zgoda: document.getElementById('zgoda')
        };
        
        function walidujFormularz() {
            const b≈Çƒôdy = {};
            
            if (pola.imie.value.length < 2) b≈Çƒôdy.imie = 'Minimum 2 znaki';
            if (!regexImie.test(pola.imie.value)) b≈Çƒôdy.imie = 'Tylko litery i spacje';
            if (!regexEmail.test(pola.email.value)) b≈Çƒôdy.email = 'Email nieprawid≈Çowy';
            if (pola.telefon.value && !regexTelefon.test(pola.telefon.value)) {
                b≈Çƒôdy.telefon = 'Dok≈Çadnie 9 cyfr';
            }
            if (pola.wiadomosc.value.length < 10) b≈Çƒôdy.wiadomosc = 'Minimum 10 znak√≥w';
            if (!pola.zgoda.checked) b≈Çƒôdy.zgoda = 'Musisz wyraziƒá zgodƒô';
            
            return b≈Çƒôdy;
        }
        
        function pokazB≈Çƒôdy(b≈Çƒôdy) {
            Object.keys(pola).forEach(klucz => {
                const pole = pola[klucz];
                const errorDiv = pole.parentElement.querySelector('.error');
                if (b≈Çƒôdy[klucz]) {
                    errorDiv.textContent = b≈Çƒôdy[klucz];
                    pole.classList.add('invalid');
                    pole.classList.remove('valid');
                } else {
                    errorDiv.textContent = '';
                    pole.classList.remove('invalid');
                    pole.classList.add('valid');
                }
            });
        }
        
        Object.values(pola).forEach(pole => {
            pole.addEventListener('blur', () => {
                const b≈Çƒôdy = walidujFormularz();
                pokazB≈Çƒôdy(b≈Çƒôdy);
            });
        });
        
        document.getElementById('formularz-kontakt').addEventListener('submit', (e) => {
            e.preventDefault();
            const b≈Çƒôdy = walidujFormularz();
            
            if (Object.keys(b≈Çƒôdy).length === 0) {
                pokazToast('‚úì Formularz wys≈Çany pomy≈õlnie!');
                document.getElementById('formularz-kontakt').reset();
                Object.values(pola).forEach(pole => {
                    pole.classList.remove('valid', 'invalid');
                });
            } else {
                pokazB≈Çƒôdy(b≈Çƒôdy);
                pokazToast('‚úó Popraw b≈Çƒôdy w formularzu');
            }
        });
        
        // ===================================================================
        // ZADANIE 6: API
        // ===================================================================
        
        let pobraniBiografowie = [];
        
        async function pobierzU≈ºytkownik√≥w() {
            const loader = document.getElementById('loader');
            const wyniki = document.getElementById('api-wyniki');
            
            try {
                loader.style.display = 'block';
                wyniki.innerHTML = '';
                
                const response = await fetch('https://jsonplaceholder.typicode.com/users');
                if (!response.ok) throw new Error('B≈ÇƒÖd ' + response.status);
                
                pobraniBiografowie = await response.json();
                
                // Wy≈õwietl w tabeli
                const tabela = document.createElement('table');
                const header = tabela.createTHead();
                const headerRow = header.insertRow();
                ['ID', 'Imiƒô', 'Email', 'Akcja'].forEach(nazwa => {
                    const th = document.createElement('th');
                    th.textContent = nazwa;
                    headerRow.appendChild(th);
                });
                
                const body = tabela.createTBody();
                pobraniBiografowie.forEach(u => {
                    const row = body.insertRow();
                    row.insertCell(0).textContent = u.id;
                    row.insertCell(1).textContent = u.name;
                    row.insertCell(2).textContent = u.email;
                    const btn = document.createElement('button');
                    btn.textContent = 'Posty';
                    btn.onclick = () => pobierzPosty(u.id, u.name);
                    row.insertCell(3).appendChild(btn);
                });
                
                wyniki.appendChild(tabela);
                pokazToast('‚úì U≈ºytkownicy za≈Çadowani!');
                
            } catch (b≈ÇƒÖd) {
                wyniki.innerHTML = '<p style="color: red;">B≈ÇƒÖd: ' + b≈ÇƒÖd.message + '</p>';
                pokazToast('‚úó B≈ÇƒÖd przy ≈Çadowaniu');
            } finally {
                loader.style.display = 'none';
            }
        }
        
        async function pobierzPosty(userId, userName) {
            const loader = document.getElementById('loader');
            const wyniki = document.getElementById('api-wyniki');
            
            try {
                loader.style.display = 'block';
                
                const response = await fetch(
                    `https://jsonplaceholder.typicode.com/users/${userId}/posts`
                );
                const posty = await response.json();
                
                wyniki.innerHTML = `<h3>Posty u≈ºytkownika: ${userName}</h3>`;
                
                posty.slice(0, 3).forEach(post => {
                    const div = document.createElement('div');
                    div.style.cssText = 'padding: 15px; background: #f5f5f5; border-radius: 8px; margin: 10px 0;';
                    div.innerHTML = `<strong>${post.title}</strong><p>${post.body}</p>`;
                    wyniki.appendChild(div);
                });
                
                pokazToast('‚úì Posty za≈Çadowane!');
                
            } catch (b≈ÇƒÖd) {
                pokazToast('‚úó B≈ÇƒÖd przy ≈Çadowaniu post√≥w');
            } finally {
                loader.style.display = 'none';
            }
        }
        
        function exportJson() {
            if (pobraniBiografowie.length === 0) {
                pokazToast('‚úó Najpierw pobierz u≈ºytkownik√≥w!');
                return;
            }
            const json = JSON.stringify(pobraniBiografowie, null, 2);
            const blob = new Blob([json], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'uzytkownicy.json';
            a.click();
            pokazToast('‚úì JSON pobrany!');
        }
        
        // ===================================================================
        // ZADANIE 7: SPA - MENED≈ªER ZADA≈É
        // ===================================================================
        
        let zadania = [];
        let filterAktualny = 'wszystkie';
        let sortowanieAktualne = 'domy≈õlnie';
        
        function inicjalizujSPA() {
            wczytajZadaniaZLS();
            renderujZadania();
            setupListenersZada≈Ñ();
        }
        
        function dodajZadanie(event) {
            event.preventDefault();
            
            const tytu≈Ç = document.getElementById('tytu≈Ç-zadania').value;
            const priorytet = document.getElementById('priorytet-zadania').value;
            const kategoria = document.getElementById('kategoria-zadania').value;
            
            if (tytu≈Ç.trim()) {
                zadania.push({
                    id: Date.now(),
                    tytu≈Ç,
                    priorytet,
                    kategoria,
                    wykonane: false,
                    dataDodania: new Date()
                });
                
                zapiszZadaniaDoLS();
                renderujZadania();
                document.getElementById('formularz-zadanie').reset();
                pokazToast('‚úì Zadanie dodane!');
            }
        }
        
        function usu≈ÑZadanie(id) {
            zadania = zadania.filter(z => z.id !== id);
            zapiszZadaniaDoLS();
            renderujZadania();
            pokazToast('‚úì Zadanie usuniƒôte');
        }
        
        function zmie≈ÑStatus(id) {
            const z = zadania.find(x => x.id === id);
            if (z) {
                z.wykonane = !z.wykonane;
                zapiszZadaniaDoLS();
                renderujZadania();
            }
        }
        
        function filtrujZadania() {
            let przefiltrowane = [...zadania];
            
            if (filterAktualny === 'aktywne') {
                przefiltrowane = przefiltrowane.filter(z => !z.wykonane);
            } else if (filterAktualny === 'wykonane') {
                przefiltrowane = przefiltrowane.filter(z => z.wykonane);
            }
            
            if (sortowanieAktualne === 'priorytet') {
                const mapa = { high: 3, medium: 2, low: 1 };
                przefiltrowane.sort((a, b) => mapa[b.priorytet] - mapa[a.priorytet]);
            } else if (sortowanieAktualne === 'alfabetycznie') {
                przefiltrowane.sort((a, b) => a.tytu≈Ç.localeCompare(b.tytu≈Ç));
            }
            
            return przefiltrowane;
        }
        
        function renderujZadania() {
            const lista = document.getElementById('zadania-lista');
            lista.innerHTML = '';
            
            const przefiltrowane = filtrujZadania();
            
            if (przefiltrowane.length === 0) {
                lista.innerHTML = '<li style="text-align: center; padding: 20px; color: #999;">Brak zada≈Ñ</li>';
            }
            
            przefiltrowane.forEach(z => {
                const li = document.createElement('li');
                li.className = `zadanie-item ${z.wykonane ? 'wykonane' : ''} ${z.priorytet}`;
                li.innerHTML = `
                    <input type="checkbox" ${z.wykonane ? 'checked' : ''} 
                           onchange="zmie≈ÑStatus(${z.id})">
                    <div class="zadanie-info">
                        <div class="tytul">${z.tytu≈Ç}</div>
                        <div>
                            <span class="kategoria">${z.kategoria}</span>
                            <span class="priorytet ${z.priorytet}">${
                                z.priorytet === 'high' ? 'Wysoki' : 
                                z.priorytet === 'medium' ? '≈öredni' : 'Niski'
                            }</span>
                        </div>
                    </div>
                    <button onclick="usu≈ÑZadanie(${z.id})">Usu≈Ñ</button>
                `;
                lista.appendChild(li);
            });
            
            // Statystyki
            document.getElementById('stat-total').textContent = zadania.length;
            document.getElementById('stat-wykonane').textContent = zadania.filter(z => z.wykonane).length;
            document.getElementById('stat-procent').textContent = 
                zadania.length ? Math.round((zadania.filter(z => z.wykonane).length / zadania.length) * 100) + '%' : '0%';
        }
        
        function ustawFilter(nowy) {
            filterAktualny = nowy;
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.filter === nowy);
            });
            renderujZadania();
        }
        
        function ustawSortowanie(nowe) {
            sortowanieAktualne = nowe;
            renderujZadania();
        }
        
        function zapiszZadaniaDoLS() {
            localStorage.setItem('zadania-js', JSON.stringify(zadania));
        }
        
        function wczytajZadaniaZLS() {
            const zapisane = localStorage.getItem('zadania-js');
            zadania = zapisane ? JSON.parse(zapisane) : [];
        }
        
        function exportZadania() {
            const json = JSON.stringify(zadania, null, 2);
            const blob = new Blob([json], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'zadania.json';
            a.click();
            pokazToast('‚úì Zadania eksportowane!');
        }
        
        function czyszczWszystko() {
            if (confirm('Czy na pewno chcesz usunƒÖƒá WSZYSTKIE zadania?')) {
                zadania = [];
                zapiszZadaniaDoLS();
                renderujZadania();
                pokazToast('‚úì Wyczyszczono wszystko');
            }
        }
        
        function setupListenersZada≈Ñ() {
            document.getElementById('formularz-zadanie').addEventListener('submit', dodajZadanie);
        }
        
        // ===================================================================
        // UTILITY
        // ===================================================================
        
        function pokazToast(wiadomo≈õƒá) {
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.textContent = wiadomo≈õƒá;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.style.animation = 'slideOut 0.3s ease-out';
                setTimeout(() => toast.remove(), 300);
            }, 2000);
        }
        
        // Start aplikacji
        window.addEventListener('load', () => {
            initGaleria();
            inicjalizujSPA();
        });
    </script>
</body>
</html>
